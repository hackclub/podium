{
  "version": "0.2.0",
  "inputs": [
    {
      "id": "doppler_environment",
      // To manaully run a command with doppler (backend): doppler run --config prd -- uv run ...
      "description": "Select Doppler environment",
      "type": "pickString",
      "options": [
        {
          "label": "Development",
          "value": "dev"
        },
        {
          "label": "Production",
          "value": "prd"
        }
      ],
      "default": "dev"
    }
  ],
  "configurations": [
    {
      // To run bun dev in prod mode:
      // MacOS/Linux: NODE_ENV=production bun run dev
      // Windows (powershell): $env:NODE_ENV="production"; bun run dev; $env:NODE_ENV=""
      "name": "frontend",
      "type": "node-terminal",
      "request": "launch",
      "command": "bun run dev",
      "cwd": "${workspaceFolder}/frontend"
    },
    {
      "name": "FastAPI",
      "type": "debugpy",
      "request": "launch",
      "module": "uvicorn",
      "args": ["podium.main:app", "--reload"],
      // Alternative: doppler run --config ${input:doppler_environment} -- uv run uvicorn podium.main:app
      "env": {
        "DOPPLER_ENV": "${input:doppler_environment}"
      },
      "cwd": "${workspaceFolder}/backend",
      "justMyCode": true
    }
  ],
  "compounds": [
    {
      "name": "dev",
      "configurations": ["frontend", "FastAPI"]
    }
  ]
}
